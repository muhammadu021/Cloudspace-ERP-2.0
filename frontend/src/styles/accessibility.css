/**
 * Accessibility Styles
 * Focus indicators, screen reader utilities, and WCAG compliance styles
 */

/* Screen Reader Only - Hide visually but keep accessible to screen readers */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Show on focus for skip links */
.sr-only.focus\:not-sr-only:focus {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* Enhanced Focus Indicators - WCAG 2.1 Level AA Compliant */
/* Minimum 3:1 contrast ratio for focus indicators */

/* Default focus style for all interactive elements */
*:focus {
  outline: 2px solid #4F46E5; /* primary-600 */
  outline-offset: 2px;
}

/* Remove default outline and add custom ring for better visibility */
*:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.5); /* primary-600 with opacity */
}

/* Button focus styles */
button:focus-visible,
[role="button"]:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.5);
}

/* Link focus styles */
a:focus-visible {
  outline: 2px solid #4F46E5;
  outline-offset: 2px;
  border-radius: 2px;
}

/* Input focus styles */
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: none;
  border-color: #4F46E5;
  box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);
}

/* Checkbox and radio focus styles */
input[type="checkbox"]:focus-visible,
input[type="radio"]:focus-visible {
  outline: 2px solid #4F46E5;
  outline-offset: 2px;
}

/* Focus within - for containers with focused children */
.focus-within\:ring:focus-within {
  box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.5);
}

/* High contrast focus for dark backgrounds */
.dark *:focus-visible {
  box-shadow: 0 0 0 3px rgba(165, 180, 252, 0.5); /* primary-300 with opacity */
}

/* Skip to content link */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: #4F46E5;
  color: white;
  padding: 8px 16px;
  text-decoration: none;
  border-radius: 0 0 4px 0;
  z-index: 9999;
  transition: top 0.2s ease;
}

.skip-link:focus {
  top: 0;
}

/* Reduced Motion - Respect user preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* High Contrast Mode Support */
@media (prefers-contrast: high) {
  /* Increase border widths */
  button,
  input,
  select,
  textarea {
    border-width: 2px;
  }

  /* Stronger focus indicators */
  *:focus-visible {
    outline-width: 3px;
    outline-offset: 3px;
  }

  /* Increase text contrast */
  body {
    color: #000000;
  }

  .dark body {
    color: #FFFFFF;
  }
}

/* Color Blind Safe Patterns */
/* Use patterns in addition to color for status indicators */
.status-success::before {
  content: "✓ ";
  font-weight: bold;
}

.status-error::before {
  content: "✗ ";
  font-weight: bold;
}

.status-warning::before {
  content: "⚠ ";
  font-weight: bold;
}

.status-info::before {
  content: "ℹ ";
  font-weight: bold;
}

/* Keyboard Navigation Indicators */
.keyboard-nav-active *:focus {
  outline: 2px solid #4F46E5;
  outline-offset: 2px;
}

/* Remove focus outline when using mouse */
.mouse-nav-active *:focus {
  outline: none;
}

.mouse-nav-active *:focus-visible {
  outline: 2px solid #4F46E5;
  outline-offset: 2px;
}

/* Touch Target Size - Minimum 44x44px for WCAG 2.1 Level AAA */
.touch-target {
  min-width: 44px;
  min-height: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Ensure adequate spacing between interactive elements */
.interactive-spacing > * + * {
  margin-top: 8px;
}

.interactive-spacing-horizontal > * + * {
  margin-left: 8px;
}

/* ARIA Live Region Styles */
[aria-live="polite"],
[aria-live="assertive"] {
  position: relative;
}

/* Loading State Accessibility */
[aria-busy="true"] {
  cursor: wait;
  opacity: 0.7;
}

/* Disabled State Accessibility */
[aria-disabled="true"],
[disabled] {
  cursor: not-allowed;
  opacity: 0.5;
}

/* Required Field Indicator */
[aria-required="true"]::after,
.required::after {
  content: " *";
  color: #DC2626; /* error-600 */
  font-weight: bold;
}

/* Invalid Field Indicator */
[aria-invalid="true"] {
  border-color: #DC2626 !important;
  background-color: #FEF2F2; /* error-50 */
}

[aria-invalid="true"]:focus {
  box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.2);
}

/* Tooltip Accessibility */
[role="tooltip"] {
  position: absolute;
  z-index: 9999;
  padding: 8px 12px;
  background: #1E293B; /* secondary-800 */
  color: white;
  border-radius: 4px;
  font-size: 14px;
  max-width: 300px;
  word-wrap: break-word;
}

/* Dialog/Modal Accessibility */
[role="dialog"],
[role="alertdialog"] {
  position: fixed;
  z-index: 1000;
}

/* Ensure modal backdrop is not focusable */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 999;
}

/* Menu Accessibility */
[role="menu"],
[role="menubar"] {
  list-style: none;
  padding: 0;
  margin: 0;
}

[role="menuitem"],
[role="menuitemcheckbox"],
[role="menuitemradio"] {
  cursor: pointer;
  padding: 8px 16px;
}

[role="menuitem"]:focus,
[role="menuitemcheckbox"]:focus,
[role="menuitemradio"]:focus {
  background-color: #EEF2FF; /* primary-50 */
  outline: none;
}

/* Tab Accessibility */
[role="tablist"] {
  display: flex;
  border-bottom: 2px solid #E2E8F0; /* secondary-200 */
}

[role="tab"] {
  padding: 12px 24px;
  cursor: pointer;
  border: none;
  background: transparent;
  position: relative;
}

[role="tab"][aria-selected="true"] {
  color: #4F46E5; /* primary-600 */
  font-weight: 600;
}

[role="tab"][aria-selected="true"]::after {
  content: "";
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  height: 2px;
  background: #4F46E5;
}

[role="tab"]:focus-visible {
  outline: 2px solid #4F46E5;
  outline-offset: -2px;
}

/* Table Accessibility */
table {
  border-collapse: collapse;
}

th {
  text-align: left;
  font-weight: 600;
}

/* Ensure table headers are properly associated */
th[scope="col"] {
  background-color: #F8FAFC; /* secondary-50 */
}

th[scope="row"] {
  font-weight: 600;
}

/* Accordion Accessibility */
[role="button"][aria-expanded] {
  cursor: pointer;
}

[role="button"][aria-expanded]::after {
  content: "▼";
  margin-left: 8px;
  transition: transform 0.2s;
  display: inline-block;
}

[role="button"][aria-expanded="true"]::after {
  transform: rotate(180deg);
}

/* Progress Bar Accessibility */
[role="progressbar"] {
  height: 8px;
  background-color: #E2E8F0; /* secondary-200 */
  border-radius: 4px;
  overflow: hidden;
}

[role="progressbar"]::before {
  content: "";
  display: block;
  height: 100%;
  background-color: #4F46E5; /* primary-600 */
  width: var(--progress-value, 0%);
  transition: width 0.3s ease;
}

/* Alert Accessibility */
[role="alert"] {
  padding: 16px;
  border-radius: 8px;
  border-left: 4px solid;
}

[role="alert"][data-type="error"] {
  background-color: #FEF2F2; /* error-50 */
  border-color: #DC2626; /* error-600 */
  color: #7F1D1D; /* error-900 */
}

[role="alert"][data-type="warning"] {
  background-color: #FFFBEB; /* warning-50 */
  border-color: #D97706; /* warning-600 */
  color: #78350F; /* warning-900 */
}

[role="alert"][data-type="success"] {
  background-color: #F0FDF4; /* success-50 */
  border-color: #16A34A; /* success-600 */
  color: #14532D; /* success-900 */
}

[role="alert"][data-type="info"] {
  background-color: #EFF6FF; /* info-50 */
  border-color: #2563EB; /* info-600 */
  color: #1E3A8A; /* info-900 */
}

/* Status Message Accessibility */
[role="status"] {
  padding: 8px 12px;
  border-radius: 4px;
  font-size: 14px;
}

/* Landmark Regions */
main {
  min-height: 100vh;
}

nav[aria-label] {
  position: relative;
}

/* Ensure proper heading hierarchy */
h1 {
  font-size: 2.25rem;
  font-weight: 700;
  line-height: 1.2;
}

h2 {
  font-size: 1.875rem;
  font-weight: 600;
  line-height: 1.3;
}

h3 {
  font-size: 1.5rem;
  font-weight: 600;
  line-height: 1.4;
}

h4 {
  font-size: 1.25rem;
  font-weight: 600;
  line-height: 1.5;
}

h5 {
  font-size: 1.125rem;
  font-weight: 600;
  line-height: 1.5;
}

h6 {
  font-size: 1rem;
  font-weight: 600;
  line-height: 1.5;
}
